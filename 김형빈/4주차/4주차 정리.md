# this

> ## 상황에 따른 this

- this는 기본적으로 실행 컨텍스트가 생성될 때 결정된다 (= 함수를 호출할 때 결정된다)

> ###  전역 공간에서의 this

- `window`: 브라우저 환경
- `global`: node 환경

> ### 함수와 메서드

- 공통점
  - 미리 정의한 동작을 수행하는 코드 뭉치

- 차이점
  - 함수는 `독립성`을 가진다.
  - 메서드는 `.` 혹은 `[]`로 호출한다.

> ### 메서드로서 호출할 때 그 메서드 내부에서의 this

- this에 호출한 주체에 대한 정보가 담긴다.
- 메서드로서 호출할 때 호출 주체는 함수명 앞의 객체이다.

```
var obj = {
	methodA: function () { console.log(this) },
	inner: {
		methodB: function() { console.log(this) },
	}
};

obj.methodA();             // this === obj
obj['methodA']();          // this === obj

obj.inner.methodB();       // this === obj.inner
obj.inner['methodB']();    // this === obj.inner
obj['inner'].methodB();    // this === obj.inner
obj['inner']['methodB'](); // this === obj.inner
```

> ### 함수로서 호출할 때 그 함수 내부에서의 this

- 어떤 함수르 함수로서 호출할 때 this는 지정되지 않는다.
- 함수로서 독립적으로 호출할 때는 this는 항상 `전역객체`를 가리킨다.

> #### 메서드 내부 함수에서의 this 우회

1. 변수를 활용하는 방법

```
var obj1 = {
	outer: function() {
		console.log(this); // (1) outer

		var innerFunc1 = function() {
			console.log(this); // (2) 전역객체
		}
		innerFunc1();

		var self = this;
		var innerFunc2 = function() {
			console.log(self); // (3) outer
		};
		innerFunc2();
	}
};

obj1.outer();
```

2. 화살표 함수 (this를 바인딩 하지 않는 함수)

```
var obj = {
        outer: function() {
            console.log(this); // (1) obj
            var innerFunc = () => {
                console.log(this); // (2) obj
            };
            innerFunc();
        }
    }

obj.outer();
```


> ### 콜백 함수 호출 시 그 함수 내부에서의 this

- 콜백 `함수`도 함수이다
- 콜백 함수에서 대상을 지정하지 않은 경우 this는 전역 객체
- 콜백 함수에 별도로 this가 될 대상을 지정한 경우 그 대상을 참조하게 된다.

> ### 생성자 함수 내부에서의 this

- 생성자란?
  - 구체적인 인스턴스를 만들기 위한 틀
- 생성자 함수로서 호출된 경우 내부에서의 this는 새로 만들 구체적인 인스턴스 자신이 된다.