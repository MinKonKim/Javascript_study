#### 2-3-2. 스코프, 스코프 체인, outerEnvironmentReference

##### 1. 스코프(Scope): 식별자의 유효범위

###### 스코프란?

-   **스코프(Scope)**는 변수나 함수가 코드 내에서 접근할 수 있는 범위를 의미한다.
-   전통적으로 자바스크립트에서 스코프는 함수에 의해 정의되었습니다. 하지만 **ES6**에서는 블록({})도 스코프를 만들 수 있게 되었습니다.

###### 함수 스코프와 블록 스코프

-   **함수 스코프**: 함수 내에서 선언된 변수는 그 함수 내에서만 유효합니다. 이 변수들은 함수 외부에서 접근할 수 없습니다.
-   **블록 스코프**: `let`, `const`로 선언된 변수는 블록 내에서만 유효합니다. `if`, `for`와 같은 블록({}) 내에서 선언된 변수는 해당 블록 외부에서 접근할 수 없습니다.

##### 2. 스코프 체인(Scope Chain): 식별자 탐색 방법

###### 스코프 체인이란?

-   **스코프 체인**은 변수를 찾기 위해 현재 스코프에서 시작해, 상위 스코프(외부 스코프)로 계속해서 검색해 나가는 과정을 말합니다.
-   스코프 체인은 **outerEnvironmentReference**라는 링크를 통해 이루어지며, 이 링크는 현재 함수가 선언될 당시의 스코프를 참조합니다.

```javascript
var a = 1;
var outer = function () {
    var inner = function () {
        console.log(a);
        var a = 3;
    };
    inner();
    console.log(a);
};
outer();
console.log(a);
```

1. 전역에서 `var a = 1;`이 선언되고, 이는 전역 스코프에 속합니다.
2. `outer` 함수가 호출되면, `outer` 함수 내부의 스코프가 생성되고, 그 안에 `inner` 함수가 정의됩니다.
3. `inner` 함수가 호출되면 `inner` 함수 스코프가 생성됩니다. `console.log(a)`를 실행할 때, `inner` 함수 스코프에 `a`가 이미 선언되었지만 아직 값이 할당되지 않았으므로 `undefined`가 출력됩니다. 이후에 `a = 3`이 할당됩니다.
4. `inner` 함수가 끝난 후, `outer` 함수 내에서 `console.log(a)`가 실행되며, 여기서 출력되는 `a`는 `outer` 함수가 아닌 전역 스코프의 `a`가 아닌 `outer` 함수의 `a`를 참조하여 `1`이 출력됩니다.
5. 마지막으로 전역에서 `console.log(a)`가 실행되면, 전역 스코프의 `a` 값인 `1`이 출력됩니다.

###### 변수 은닉화(Variable Shadowing)

-   여러 스코프에서 동일한 이름의 변수가 존재할 때, 가장 가까운 스코프에 있는 변수가 사용됩니다. 이 때문에 외부 스코프에 있는 동일한 이름의 변수는 "은닉"됩니다.

##### 3. 전역 변수와 지역 변수

-   **전역 변수 (Global Variable)**는 전역 스코프(전역 컨텍스트)에서 선언된 변수로, 어디서든 접근할 수 있습니다. 하지만 많은 전역 변수는 코드의 복잡성을 높이고, 충돌 가능성을 증가시킬 수 있으므로 사용을 최소화하는 것이 좋습니다.

-   **지역 변수 (Local Variable)**는 함수나 블록 내부에서 선언된 변수로, 해당 함수나 블록 내에서만 접근할 수 있습니다.

#### 2-4. this 바인딩(this Binding)

-   **this**는 함수가 어떻게 호출되었느냐에 따라 결정
-   전역 컨텍스트에서 `this`는 전역 객체를 가리킵
-   함수 호출 방식에 따라 `this`의 값이 달라짐
